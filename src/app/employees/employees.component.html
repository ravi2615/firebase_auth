<app-header></app-header>

<div class="container employee">
    <div class="row d-flex justify-content-center p-2 ">
        <h1>Angular 10 with Firebase Crud app</h1>
    </div>
<div class="border col-lg-6">
    <div class="form-group">
        <input type="text" class="form-control" [(ngModel)] ='employeeName' placeholder="Enter Employee Name" >
    </div>
    <div class="form-group">
        <input type="number" class="form-control" [(ngModel)] ='employeeAge' placeholder="Enter Employee Age" >
    </div>
    <div class="form-group">
        <input type="text" class="form-control" [(ngModel)] ='employeeAddress' placeholder="Enter Employee Address" >
    </div>
    <div class="form-group">
        <button class="btn btn-primary" (click)="createRecord()" [disabled]="!employeeName || !employeeAge || !employeeAddress">Create Employee</button>
    </div>
    <div *ngIf="message" class="alert alert-success" role="alert">
        <strong>{{message}}</strong>
      </div>
</div>
    

      <div class="row p-3">
        <h4 class="col-md-12 p-2 justify-content-center">All Employee Data</h4>
        <div class="col-md-3" *ngFor="let item of employee">
              <div class="card" *ngIf="!item.isedit; else elseBlock">
                  <div class="card-body">
                      <div class="card-title">
                          Name: {{item.name}}
                      </div>
                      <div class="card-subtitle">
                          Age: {{item.age}}
                      </div>
                      <div class="card-text">
                          Address: {{item.address}}
                      </div>
                      <span>
                        <button (click)="editRecord(item)" class="btn btn-primary btn-sm" >Edit Employee</button>
                        <button (click)="deleteRecord(item.id)" class="btn btn-danger btn-sm">Delete Employee</button>
                    </span>
                  </div>
              </div>
              <ng-template #elseBlock>
                <div class="card">
                    <div class="card-body">
                        <div class="card-title">
                            Edit Employee
                        </div>
                        <div class="row">
                            <div class="form-group">
                                <div class="col-md-12">
                                    <input type="text" [(ngModel)] ='item.editname' class="form-control">
                                </div>
                                <div class="col-md-12">
                                    <input type="number" [(ngModel)]="item.editage" class="form-control">
                                </div>
                                <div class="col-md-12">
                                    <input type="text" [(ngModel)]="item.editaddress" class="form-control">
                                </div>
                            </div>
                        </div>
                        <span>
                        <button (click)="updateRecord(item)" class="btn btn-success btn-sm" >Save</button>
                        <button  (click)="item.isedit=false" class="btn btn-danger btn-sm">Cancel</button>
                    </span>
                    </div>
                </div>
              </ng-template>
          </div>
      </div>
     
</div>